<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Word Garden</title>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Noto Serif (Classic) and Lato (Clean) for Reggio feel -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Noto+Serif:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        /* Custom Reggio Emilia Color Palette & Styles */
        :root {
            --color-paper: #FDFBF7; /* Warm white paper look */
            --color-stone: #E5E5E5;
            --color-sage: #8DA399;  /* Calming green */
            --color-clay: #C29B82;  /* Earthy accent */
            --color-charcoal: #3E3E3E; /* Soft black for text */
            --color-leaf: #5F7A6E;
        }

        body {
            background-color: var(--color-paper);
            color: var(--color-charcoal);
            font-family: 'Lato', sans-serif;
            background-image: radial-gradient(#E5E5E5 1px, transparent 1px);
            background-size: 20px 20px; /* Subtle grid paper effect */
        }

        .font-serif {
            font-family: 'Noto Serif', serif;
        }

        /* Soft, organic animations */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }

        .animate-float {
            animation: float 4s ease-in-out infinite;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--color-sage);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ==========================================
        // TEACHER SETTINGS AREA
        // Edit these variables to adjust the app!
        // ==========================================
        const TEACHER_SETTINGS = {
            appTitle: "The Word Garden",
            welcomeMessage: "What will you discover today?",
            
            // Words for the "Discovery Word" feature (Word of the Day)
            discoveryWords: [
                "curious", "nature", "create", "observe", "wonder", 
                "habitat", "journey", "ripple", "breeze", "meadow",
                "canopy", "blossom", "explore", "quiet", "listen"
            ],

            // SAFETY FILTER: Add words here that you want to block.
            // The app will simply say "Word not found" or "Doesn't belong".
            // You can add to this list as needed.
            bannedWords: [
                "stupid", "idiot", "dumb", "hate", "kill", "death", 
                "violence", "weapon", "sex", "nude", "naked",
                // Add other words here inside quotes, separated by commas
            ],

            // Gamification: Badges for collecting words
            badges: [
                { count: 1, name: "Seedling", icon: "üå±", description: "You planted your first word!" },
                { count: 5, name: "Sprout", icon: "üåø", description: "Your vocabulary is growing." },
                { count: 10, name: "Gardener", icon: "üåª", description: "You are tending to many ideas." },
                { count: 20, name: "Botanist", icon: "üå≥", description: "A true expert of the word garden." },
                { count: 50, name: "Forest", icon: "üå≤", description: "An ecosystem of knowledge!" }
            ],

            // Audio settings
            enableSound: true
        };

        const { useState, useEffect, useRef } = React;

        // ==========================================
        // INTERNAL ICONS (Replaces External Library)
        // ==========================================
        const Icons = {
            Search: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>,
            BookOpen: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>,
            Star: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill={props.fill || "none"} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>,
            Trash2: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>,
            Volume2: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>,
            Leaf: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"></path><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"></path></svg>,
            Award: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>,
            RotateCcw: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M1 4v6h6"></path><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>,
            Sparkles: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path></svg>
        };

        // ==========================================
        // MAIN APP COMPONENT
        // ==========================================
        function App() {
            // --- State Variables ---
            const [searchTerm, setSearchTerm] = useState("");
            const [definition, setDefinition] = useState(null);
            const [relatedWords, setRelatedWords] = useState({ synonyms: [], antonyms: [] });
            const [showThesaurus, setShowThesaurus] = useState(false);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState(null);
            
            // Collection & Progress (Loaded from Local Storage)
            const [collection, setCollection] = useState(() => {
                const saved = localStorage.getItem('wordGardenCollection');
                return saved ? JSON.parse(saved) : [];
            });
            
            // "Discovery Word" State
            const [discoveryWord, setDiscoveryWord] = useState("");

            // View State: 'search', 'collection', 'badges'
            const [view, setView] = useState('search');

            // --- Effects ---
            
            // Save collection to local storage whenever it changes
            useEffect(() => {
                localStorage.setItem('wordGardenCollection', JSON.stringify(collection));
            }, [collection]);

            // Set a random discovery word on load
            useEffect(() => {
                const randomWord = TEACHER_SETTINGS.discoveryWords[Math.floor(Math.random() * TEACHER_SETTINGS.discoveryWords.length)];
                setDiscoveryWord(randomWord);
            }, []);

            // --- Functions ---

            // Helper to extract synonyms and antonyms from API data
            const extractRelatedWords = (data) => {
                let syns = new Set();
                let ants = new Set();

                // Check root level meanings
                if (data.meanings) {
                    data.meanings.forEach(m => {
                        if (m.synonyms) m.synonyms.forEach(s => syns.add(s));
                        if (m.antonyms) m.antonyms.forEach(a => ants.add(a));
                        
                        // Check inside definitions
                        if (m.definitions) {
                            m.definitions.forEach(d => {
                                if (d.synonyms) d.synonyms.forEach(s => syns.add(s));
                                if (d.antonyms) d.antonyms.forEach(a => ants.add(a));
                            });
                        }
                    });
                }
                return { synonyms: Array.from(syns), antonyms: Array.from(ants) };
            };

            const handleSearch = async (e) => {
                if (e) e.preventDefault();
                if (!searchTerm.trim()) return;

                // SAFETY CHECK: Profanity Filter
                const cleanSearch = searchTerm.trim().toLowerCase();
                const isBanned = TEACHER_SETTINGS.bannedWords.some(badWord => cleanSearch.includes(badWord));

                if (isBanned) {
                    setError("That word doesn't seem to fit in our garden. Let's try a different one.");
                    setDefinition(null);
                    setLoading(false);
                    playSound('error');
                    return;
                }

                setLoading(true);
                setError(null);
                setDefinition(null);
                setRelatedWords({ synonyms: [], antonyms: [] });
                setShowThesaurus(false);
                setView('search');

                try {
                    // Using the Free Dictionary API
                    const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${searchTerm}`);
                    
                    if (!response.ok) {
                        throw new Error("Word not found");
                    }

                    const data = await response.json();
                    const entry = data[0];
                    setDefinition(entry);
                    setRelatedWords(extractRelatedWords(entry));
                    playSound('pop');
                } catch (err) {
                    setError("Hmm, we couldn't find that word in our garden. Try checking the spelling.");
                } finally {
                    setLoading(false);
                }
            };

            const addToCollection = () => {
                if (!definition) return;
                
                // Avoid duplicates
                if (collection.some(item => item.word === definition.word)) {
                    playSound('error');
                    return;
                }

                const newEntry = {
                    word: definition.word,
                    partOfSpeech: definition.meanings[0].partOfSpeech,
                    definition: definition.meanings[0].definitions[0].definition,
                    timestamp: new Date().toISOString()
                };

                setCollection([newEntry, ...collection]);
                playSound('success');
            };

            const removeFromCollection = (wordToRemove) => {
                setCollection(collection.filter(item => item.word !== wordToRemove));
            };

            const resetProgress = () => {
                if (confirm("Are you sure you want to clear your entire garden? This cannot be undone.")) {
                    setCollection([]);
                    localStorage.removeItem('wordGardenCollection');
                    setDefinition(null);
                    setSearchTerm("");
                    playSound('trash');
                }
            };

            const handleThesaurusClick = (word) => {
                setSearchTerm(word);
                // We need to wait a tiny bit for state to update or just call search directly
                // Using a timeout to allow the state update to settle, but ideally we'd use a useEffect. 
                // For simplicity, we just trigger search logic manually or via a slight delay.
                // Better approach: Call a specific function that takes a word argument.
                // Since handleSearch uses state 'searchTerm', we can't just call it easily without refactoring.
                // We will just set the input and let user click or trigger it. 
                // Actually, let's just trigger it manually.
                
                // Hacky but works for this single-file structure:
                setTimeout(() => {
                   document.querySelector('button[type="submit"]').click(); 
                }, 100);
            }

            const playSound = (type) => {
                if (!TEACHER_SETTINGS.enableSound) return;
                
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                
                osc.connect(gain);
                gain.connect(ctx.destination);

                const now = ctx.currentTime;
                
                if (type === 'pop') {
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(400, now);
                    osc.frequency.exponentialRampToValueAtTime(600, now + 0.1);
                    gain.gain.setValueAtTime(0.1, now);
                    gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                    osc.start(now);
                    osc.stop(now + 0.1);
                } else if (type === 'success') {
                    osc.type = 'triangle';
                    osc.frequency.setValueAtTime(300, now);
                    osc.frequency.linearRampToValueAtTime(500, now + 0.1);
                    osc.frequency.linearRampToValueAtTime(800, now + 0.3);
                    gain.gain.setValueAtTime(0.1, now);
                    gain.gain.exponentialRampToValueAtTime(0.01, now + 0.5);
                    osc.start(now);
                    osc.stop(now + 0.5);
                } else if (type === 'error') {
                    osc.type = 'sawtooth';
                    osc.frequency.setValueAtTime(150, now);
                    osc.frequency.linearRampToValueAtTime(100, now + 0.2);
                    gain.gain.setValueAtTime(0.1, now);
                    gain.gain.linearRampToValueAtTime(0.01, now + 0.2);
                    osc.start(now);
                    osc.stop(now + 0.2);
                }
            };

            const playPronunciation = (audioUrl) => {
                if (audioUrl) {
                    new Audio(audioUrl).play();
                } else {
                    alert("No audio recording available for this word.");
                }
            };

            // Calculate current badge
            const getCurrentBadge = () => {
                const count = collection.length;
                // Find the highest badge where count >= badge.count
                let current = TEACHER_SETTINGS.badges[0];
                for (let badge of TEACHER_SETTINGS.badges) {
                    if (count >= badge.count) {
                        current = badge;
                    }
                }
                return current;
            };

            const currentBadge = getCurrentBadge();

            // --- Render Components ---

            return (
                <div className="max-w-4xl mx-auto p-4 min-h-screen flex flex-col font-sans text-gray-700">
                    
                    {/* Header */}
                    <header className="flex flex-col md:flex-row justify-between items-center py-6 border-b-2 border-stone-200 mb-8">
                        <div className="flex items-center gap-3 mb-4 md:mb-0">
                            <div className="bg-[#8DA399] p-3 rounded-full text-white animate-float">
                                <Icons.Leaf size={32} />
                            </div>
                            <div>
                                <h1 className="text-3xl font-serif text-[#5F7A6E] font-bold">{TEACHER_SETTINGS.appTitle}</h1>
                                <p className="text-sm text-gray-500 italic">{TEACHER_SETTINGS.welcomeMessage}</p>
                            </div>
                        </div>

                        {/* Navigation / Stats */}
                        <div className="flex gap-4">
                            <button 
                                onClick={() => setView('search')}
                                className={`px-4 py-2 rounded-lg transition-all ${view === 'search' ? 'bg-[#C29B82] text-white shadow-md' : 'bg-white hover:bg-stone-100'}`}
                            >
                                Search
                            </button>
                            <button 
                                onClick={() => setView('collection')}
                                className={`px-4 py-2 rounded-lg transition-all flex items-center gap-2 ${view === 'collection' ? 'bg-[#8DA399] text-white shadow-md' : 'bg-white hover:bg-stone-100'}`}
                            >
                                <Icons.BookOpen size={18} /> Collection ({collection.length})
                            </button>
                            <button 
                                onClick={() => setView('badges')}
                                className={`px-4 py-2 rounded-lg transition-all flex items-center gap-2 ${view === 'badges' ? 'bg-[#EBC45D] text-white shadow-md' : 'bg-white hover:bg-stone-100'}`}
                            >
                                <Icons.Award size={18} /> Badges
                            </button>
                        </div>
                    </header>

                    {/* Main Content Area */}
                    <main className="flex-grow">
                        
                        {/* VIEW: SEARCH */}
                        {view === 'search' && (
                            <div className="fade-in">
                                {/* Search Bar */}
                                <form onSubmit={handleSearch} className="relative max-w-2xl mx-auto mb-12">
                                    <input 
                                        type="text" 
                                        placeholder="Type a word to plant in your garden..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        className="w-full p-4 pl-6 pr-12 text-xl rounded-2xl border-2 border-[#8DA399]/30 focus:border-[#8DA399] focus:outline-none shadow-sm transition-all bg-white/80 backdrop-blur"
                                    />
                                    <button 
                                        type="submit"
                                        className="absolute right-3 top-3 p-2 bg-[#8DA399] text-white rounded-xl hover:bg-[#5F7A6E] transition-colors"
                                    >
                                        <Icons.Search size={24} />
                                    </button>
                                </form>

                                {/* Discovery Word (Only show if no search result yet) */}
                                {!definition && !loading && !error && (
                                    <div className="text-center p-8 bg-white/50 rounded-3xl border border-stone-100 max-w-md mx-auto">
                                        <p className="uppercase tracking-widest text-xs font-bold text-[#C29B82] mb-2">Discovery Word</p>
                                        <h2 className="text-4xl font-serif text-[#5F7A6E] mb-4 cursor-pointer hover:underline" onClick={() => { setSearchTerm(discoveryWord); }}>
                                            {discoveryWord}
                                        </h2>
                                        <p className="text-gray-500 text-sm">Tap the word to look it up!</p>
                                    </div>
                                )}

                                {/* Loading State */}
                                {loading && (
                                    <div className="text-center py-12">
                                        <div className="animate-spin inline-block w-8 h-8 border-4 border-[#8DA399] border-t-transparent rounded-full"></div>
                                        <p className="mt-4 text-gray-500">Digging through the soil...</p>
                                    </div>
                                )}

                                {/* Error State */}
                                {error && (
                                    <div className="bg-red-50 border border-red-100 text-red-600 p-6 rounded-2xl text-center max-w-md mx-auto">
                                        <p>{error}</p>
                                    </div>
                                )}

                                {/* Definition Card */}
                                {definition && (
                                    <div className="bg-white p-8 rounded-3xl shadow-lg border border-stone-100 max-w-3xl mx-auto relative overflow-hidden">
                                        {/* Decorative leaf bg */}
                                        <div className="absolute -right-10 -top-10 text-stone-50 pointer-events-none">
                                            <Icons.Leaf size={200} />
                                        </div>

                                        <div className="relative z-10">
                                            <div className="flex justify-between items-start mb-6">
                                                <div>
                                                    <h2 className="text-5xl font-serif text-[#3E3E3E] mb-2 capitalize">{definition.word}</h2>
                                                    <div className="flex items-center gap-3">
                                                        <span className="text-[#C29B82] font-mono italic">{definition.phonetic || ""}</span>
                                                        {definition.phonetics.find(p => p.audio) && (
                                                            <button 
                                                                onClick={() => playPronunciation(definition.phonetics.find(p => p.audio).audio)}
                                                                className="p-1.5 rounded-full bg-stone-100 hover:bg-[#8DA399] hover:text-white transition-colors"
                                                                title="Listen"
                                                            >
                                                                <Icons.Volume2 size={16} />
                                                            </button>
                                                        )}
                                                    </div>
                                                </div>
                                                
                                                <button 
                                                    onClick={addToCollection}
                                                    disabled={collection.some(item => item.word === definition.word)}
                                                    className={`group flex flex-col items-center gap-1 ${collection.some(item => item.word === definition.word) ? 'opacity-50 cursor-not-allowed' : ''}`}
                                                >
                                                    <div className="p-3 bg-[#EBC45D] text-white rounded-full shadow-md transform transition group-hover:scale-110">
                                                        <Icons.Star size={24} fill={collection.some(item => item.word === definition.word) ? "white" : "none"} />
                                                    </div>
                                                    <span className="text-xs font-bold text-[#C29B82]">
                                                        {collection.some(item => item.word === definition.word) ? 'Saved' : 'Save'}
                                                    </span>
                                                </button>
                                            </div>

                                            <div className="space-y-6">
                                                {definition.meanings.map((meaning, idx) => (
                                                    <div key={idx} className="border-l-4 border-[#8DA399]/30 pl-4">
                                                        <span className="inline-block bg-[#8DA399]/10 text-[#5F7A6E] px-2 py-1 rounded text-sm font-bold mb-2">
                                                            {meaning.partOfSpeech}
                                                        </span>
                                                        <ul className="list-disc list-inside space-y-2 text-lg text-gray-600 mt-2">
                                                            {meaning.definitions.slice(0, 3).map((def, dIdx) => (
                                                                <li key={dIdx}>{def.definition}</li>
                                                            ))}
                                                        </ul>
                                                    </div>
                                                ))}
                                            </div>

                                            {/* THESAURUS SECTION */}
                                            <div className="mt-8 pt-6 border-t border-stone-100">
                                                <button 
                                                    onClick={() => setShowThesaurus(!showThesaurus)}
                                                    className="flex items-center gap-2 text-[#5F7A6E] hover:text-[#C29B82] font-bold transition-colors"
                                                >
                                                    <Icons.Sparkles size={18} /> 
                                                    {showThesaurus ? "Hide Thesaurus" : "Open Thesaurus (Synonyms & Antonyms)"}
                                                </button>

                                                {showThesaurus && (
                                                    <div className="mt-4 p-4 bg-stone-50 rounded-xl animate-float" style={{animationDuration: '0.5s', animationIterationCount: '1'}}>
                                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                            {/* Synonyms */}
                                                            <div>
                                                                <h4 className="text-sm uppercase tracking-wide text-[#8DA399] font-bold mb-2 flex items-center gap-2">
                                                                    <span className="text-lg">üå±</span> Seeds (Synonyms)
                                                                </h4>
                                                                <div className="flex flex-wrap gap-2">
                                                                    {relatedWords.synonyms.length > 0 ? (
                                                                        relatedWords.synonyms.slice(0, 8).map((word, i) => (
                                                                            <span 
                                                                                key={i} 
                                                                                onClick={() => handleThesaurusClick(word)}
                                                                                className="bg-white border border-[#8DA399] text-[#5F7A6E] px-2 py-1 rounded-full text-sm cursor-pointer hover:bg-[#8DA399] hover:text-white transition-colors"
                                                                            >
                                                                                {word}
                                                                            </span>
                                                                        ))
                                                                    ) : (
                                                                        <span className="text-gray-400 text-sm italic">No synonyms found.</span>
                                                                    )}
                                                                </div>
                                                            </div>

                                                            {/* Antonyms */}
                                                            <div>
                                                                <h4 className="text-sm uppercase tracking-wide text-[#C29B82] font-bold mb-2 flex items-center gap-2">
                                                                    <span className="text-lg">üçÇ</span> Weeds (Antonyms)
                                                                </h4>
                                                                <div className="flex flex-wrap gap-2">
                                                                    {relatedWords.antonyms.length > 0 ? (
                                                                        relatedWords.antonyms.slice(0, 8).map((word, i) => (
                                                                            <span 
                                                                                key={i} 
                                                                                onClick={() => handleThesaurusClick(word)}
                                                                                className="bg-white border border-[#C29B82] text-[#C29B82] px-2 py-1 rounded-full text-sm cursor-pointer hover:bg-[#C29B82] hover:text-white transition-colors"
                                                                            >
                                                                                {word}
                                                                            </span>
                                                                        ))
                                                                    ) : (
                                                                        <span className="text-gray-400 text-sm italic">No antonyms found.</span>
                                                                    )}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                )}
                                            </div>

                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* VIEW: COLLECTION */}
                        {view === 'collection' && (
                            <div className="fade-in">
                                <h2 className="text-3xl font-serif text-[#5F7A6E] mb-6 text-center">My Word Collection</h2>
                                
                                {collection.length === 0 ? (
                                    <div className="text-center py-20 bg-white/50 rounded-3xl border-2 border-dashed border-stone-300">
                                        <Icons.Leaf size={48} className="mx-auto text-stone-300 mb-4" />
                                        <p className="text-gray-500">Your garden is empty. Go search for words to plant!</p>
                                    </div>
                                ) : (
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                        {collection.map((item, idx) => (
                                            <div key={idx} className="bg-white p-6 rounded-2xl shadow-sm border-b-4 border-[#C29B82] hover:-translate-y-1 transition-transform relative group">
                                                <div className="flex justify-between items-start mb-2">
                                                    <h3 className="text-xl font-bold font-serif capitalize">{item.word}</h3>
                                                    <span className="text-xs text-[#8DA399] border border-[#8DA399] px-1.5 py-0.5 rounded">{item.partOfSpeech}</span>
                                                </div>
                                                <p className="text-gray-600 text-sm line-clamp-3 mb-4">{item.definition}</p>
                                                <button 
                                                    onClick={() => removeFromCollection(item.word)}
                                                    className="absolute bottom-4 right-4 text-stone-300 hover:text-red-400 transition-colors"
                                                    title="Remove from collection"
                                                >
                                                    <Icons.Trash2 size={18} />
                                                </button>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        )}

                        {/* VIEW: BADGES */}
                        {view === 'badges' && (
                            <div className="fade-in max-w-3xl mx-auto">
                                <div className="text-center mb-10">
                                    <h2 className="text-3xl font-serif text-[#5F7A6E] mb-2">Explorer Badges</h2>
                                    <p className="text-gray-600">You have collected <strong className="text-[#C29B82] text-xl">{collection.length}</strong> words.</p>
                                </div>

                                <div className="space-y-4">
                                    {TEACHER_SETTINGS.badges.map((badge, idx) => {
                                        const isUnlocked = collection.length >= badge.count;
                                        return (
                                            <div 
                                                key={idx} 
                                                className={`flex items-center p-4 rounded-2xl border-2 transition-all ${isUnlocked ? 'bg-white border-[#EBC45D]' : 'bg-stone-100 border-stone-200 opacity-60'}`}
                                            >
                                                <div className={`w-16 h-16 rounded-full flex items-center justify-center text-3xl mr-6 ${isUnlocked ? 'bg-[#EBC45D]/20' : 'bg-stone-200 grayscale'}`}>
                                                    {badge.icon}
                                                </div>
                                                <div className="flex-grow">
                                                    <h3 className={`text-xl font-bold ${isUnlocked ? 'text-gray-800' : 'text-gray-400'}`}>
                                                        {badge.name}
                                                    </h3>
                                                    <p className="text-sm text-gray-500">{badge.description}</p>
                                                </div>
                                                <div className="text-right">
                                                    <span className={`text-sm font-mono px-2 py-1 rounded ${isUnlocked ? 'bg-[#EBC45D] text-white' : 'bg-stone-300 text-gray-500'}`}>
                                                        {isUnlocked ? 'UNLOCKED' : `${badge.count} words`}
                                                    </span>
                                                </div>
                                            </div>
                                        )
                                    })}
                                </div>
                            </div>
                        )}

                    </main>

                    {/* Footer / Reset */}
                    <footer className="mt-12 pt-8 border-t border-stone-200 flex justify-center">
                        <button 
                            onClick={resetProgress}
                            className="text-stone-400 hover:text-stone-600 text-sm flex items-center gap-1 transition-colors"
                        >
                            <Icons.RotateCcw size={14} /> Reset Garden
                        </button>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
